
<form class="form-horizontal" name="add"novalidate>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>所属数据中心</label>

        <div class="col-sm-8" data-ng-class="(add.dcName.$invalid&&add.dcName.$dirty) ? 'has-error' : ''">
            <eayun-select placeholder="--请选择数据中心--" class="form-control form-select"  ng-model="model.model.dataCenterId" name="dcName" ng-change="model.changeDc(model.model.dataCenterId)" required>
                <eayun-option value="dc.id" text="{{dc.name}}"
                              ng-repeat="dc in model.dcList"></eayun-option>
            </eayun-select>

        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>所属机柜</label>

        <div class="col-sm-8" data-ng-class="(model.model.cabinetId==''&&model.model.cabinetId.length<=0) ? 'has-error' : ''">
            <eayun-select placeholder="--请选择机柜--" class="form-control form-select"  data-ng-model="model.model.cabinetId" name="cabinetName"ng-change="model.changeCabinet()">
                <eayun-option value="cn.id" text="{{cn.name}}"
                              ng-repeat="cn in model.cnList"></eayun-option>
            </eayun-select>

        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>规格</label>

        <div class="col-sm-7" data-ng-class="(add.spec.$dirty && add.spec.$invalid ) ? 'has-error' : ''">
            <input type="text" class="form-control" name="spec"
                   data-ng-model="model.model.spec"  data-ajax-valid="model.checkSpec(value,add.spec.$dirty)"/>
            <label class="control-label" ng-show="add.spec.$dirty && add.spec.$error.required">请输入机柜的U数,例如:10</label>
            <label class="control-label" ng-if="!add.spec.$error.required&&!model.specFlag">请输入50以内的正整数</label>
        </div>
        <label class="control-label">U</label>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>所属机柜位置</label>

        <div class="col-sm-8" data-ng-class="((add.state.$error.required&&!model.stateflag)||(!add.spec.$error.required&&!model.stateFlag))? 'has-error' : ''">
            <eayun-select placeholder="--请选择机柜位置--" class="form-control form-select"  ng-model="model.model.state" name="state" required>
                <eayun-option value="st.state" text="{{st.state}}"
                              ng-repeat="st in model.stateList"></eayun-option>
            </eayun-select>

            <label class="control-label" ng-show="!add.spec.$error.required&&!model.stateFlag">该机柜下没有可用位置</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>交换机名称</label>

        <div class="col-sm-8" data-ng-class="((!add.name.$error.required&&!model.validName)||(!add.name.$error.required&&!model.nameFlag)||(add.name.$dirty && !model.validName&&!add.name.$error.required)||(add.name.$dirty && add.name.$error.required))  ? 'has-error' : ''">
            <input type="text" class="form-control" name="name" data-ng-model="model.model.name" maxlength="20"  required data-ajax-valid="model.checkName(value)"/>
            <label class="control-label" ng-show="add.name.$dirty && add.name.$error.required">交换机名称必填</label>
            <label class="control-label" ng-show="!add.name.$error.required && (!model.validName && model.nameFlag)">存在相同的交换机名称</label>
            <label class="control-label" ng-if="!add.name.$error.required&&!model.nameFlag">请输入1-20名称,包括数字、中英文、下划线、空格</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>交换机IP地址</label>

        <div class="col-sm-8" data-ng-class="(add.ipAddress.$invalid&&add.ipAddress.$dirty) ? 'has-error' : ''">
            <input type="text" class="form-control" name="ipAddress" data-ng-model="model.model.ipAddress" data-ajax-valid="model.checkIp(value)" required/>
            <label class="control-label" ng-show="add.ipAddress.$dirty && add.ipAddress.$error.required">IP地址必填</label>
            <label class="control-label" ng-if="!add.ipAddress.$error.required&&!model.ipFlag">请输入正确的IP地址</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>端口数</label>

        <div class="col-sm-8" data-ng-class="(add.portCapacity.$invalid&&add.portCapacity.$dirty) ? 'has-error' : ''">
            <input type="text" class="form-control" maxlength="10" name="portCapacity" data-ng-model="model.model.portCapacity" data-ajax-valid="model.checkPc(value)" required/>
            <label class="control-label" ng-show="add.portCapacity.$dirty && add.portCapacity.$error.required">端口数必填</label>
            <label class="control-label" ng-if="!add.portCapacity.$error.required&&!model.pcFlag">端口数仅限正整数</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>交换机型号</label>

        <div class="col-sm-8" data-ng-class="(add.switchModel.$invalid&&add.switchModel.$dirty) ? 'has-error' : ''">
            <input type="text" class="form-control" maxlength="50" name="switchModel" data-ng-model="model.model.switchModel" required/>
            <label class="control-label" ng-show="add.switchModel.$dirty && add.switchModel.$error.required">交换机型号必填</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>接口类型</label>

        <div class="col-sm-8" data-ng-class="(add.interfaceModel.$invalid&&add.interfaceModel.$dirty) ? 'has-error' : ''">
            <input type="text" class="form-control"maxlength="50" name="interfaceModel" data-ng-model="model.model.interfaceModel" required/>
            <label class="control-label" ng-show="add.interfaceModel.$dirty && add.interfaceModel.$error.required">接口类型必填</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>转发功能</label>

        <div class="col-sm-8" data-ng-class="(add.forwardFunc.$invalid&&add.forwardFunc.$dirty) ? 'has-error' : ''">
            <input type="text" class="form-control" maxlength="50" name="forwardFunc" data-ng-model="model.model.forwardFunc" required/>
            <label class="control-label" ng-show="add.forwardFunc.$dirty && add.forwardFunc.$error.required">转发功能必填</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label">责任人</label>

        <div class="col-sm-8" data-ng-class="(add.checkresponPerson.$dirty&&add.checkresponPerson.$invalid?'show':'hide'&&model.model.responPerson.lenth>0) ? 'has-error' : ''">
            <input type="text" class="form-control"  name="checkresponPerson" data-ng-model="model.model.responPerson" data-ng-pattern="/^[\u4e00-\u9fa5a-zA-Z0-9_]{0,20}$/" />
            <label class="control-label" ng-if="add.checkresponPerson.$dirty&&add.checkresponPerson.$error.pattern?'show':'hide'&&model.model.responPerson.lenth>0
">请输入1-20位字符,支持数字、中英文、下划线
            </label>

        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label">联系电话</label>

        <div class="col-sm-8" data-ng-class="(add.responPersonMobile.$invalid&&add.responPersonMobile.$dirty) ? 'has-error' : ''">
            <input type="text" class="form-control" name="responPersonMobile" ng-model="model.model.responPersonMobile" data-ng-pattern="/^1\d{10}$|^(0\d{2,3}-?|\(0\d{2,3}\))?[1-9]\d{4,7}(-\d{1,8})?$/" />
            <label class="control-label" ng-if="add.responPersonMobile.$dirty &&add.responPersonMobile.$error.pattern">请输入正确的联系电话</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label">备注</label>
        <div class="col-sm-8" >
            <textarea class="form-control ng-valid" maxlength="200" data-ng-model="model.model.memo" style="height:50px;"></textarea>
        </div>
    </div>
</form>
<div class="modal-footer">
    <button class="btn btn-primary btn-modal" ng-click="ok(model.model)" ng-disabled="add.$invalid||!model.stateFlag||!model.validName" type = "button">确  定</button>
    <button class="btn btn-default btn-modal" ng-click="cancel()" style = "margin-left:15px;" type = "button">取  消</button>
</div>