
<form class="form-horizontal" name="add" novalidate>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>所属数据中心</label>

        <div class="col-sm-8" data-ng-class="(add.dcName.$invalid&&add.dcName.$dirty) ? 'has-error' : ''">
            <eayun-select placeholder="--请选择数据中心--" class="form-control form-select"  ng-model="model.model.dataCenterId" name="dcName" ng-change="model.changeDc(model.model.dataCenterId)"  required>
                <eayun-option value="dc.id" text="{{dc.name}}"
                              ng-repeat="dc in model.dcList"></eayun-option>
            </eayun-select>

        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>所属机柜</label>

        <div class="col-sm-8" data-ng-class="(model.model.cabinetId==''&&model.model.cabinetId.length<=0) ? 'has-error' : ''">
            <eayun-select placeholder="--请选择机柜--" class="form-control form-select"  data-ng-model="model.model.cabinetId" name="cabinetName"ng-change="model.changeCabinet()" required>
                <eayun-option value="cn.id" text="{{cn.name}}"
                              ng-repeat="cn in model.cnList"></eayun-option>
            </eayun-select>

        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>规格</label>

        <div class="col-sm-7" data-ng-class="(add.spec.$dirty && add.spec.$invalid ) ? 'has-error' : ''">
            <input type="text" class="form-control" name="spec"
                   data-ng-model="model.model.spec"  data-ajax-valid="model.checkSpec(value,add.spec.$dirty)"maxlength="3"required />
            <label class="control-label" ng-show="add.spec.$dirty && add.spec.$error.required">请输入机柜的U数,例如:10</label>
            <label class="control-label" ng-if="!add.spec.$error.required&&!model.specFlag">请输入50以内的正整数</label>
        </div>
        <label class="control-label">U</label>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>所属机柜位置</label>

        <div class="col-sm-8" data-ng-class="((add.state.$error.required&&!model.stateflag)||(!add.spec.$error.required&&!model.stateFlag))? 'has-error' : ''">
            <eayun-select placeholder="--请选择机柜位置--" class="form-control form-select"  ng-model="model.model.state" name="state"  >
                <eayun-option value="st.state" text="{{st.state}}"
                              ng-repeat="st in model.stateList"></eayun-option>
            </eayun-select>

            <label class="control-label" ng-show="!add.spec.$error.required&&!model.stateFlag">该机柜下没有可用位置</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>存储名称</label>

        <div class="col-sm-8" data-ng-class="((!add.name.$error.required&&!model.validName)||(!add.name.$error.required&&!model.nameFlag)||(add.name.$dirty && !model.validName&&!add.name.$error.required)||(add.name.$dirty && add.name.$error.required)) ? 'has-error' : ''">
            <input type="text" class="form-control" name="name" data-ng-model="model.model.name" maxlength="20" data-ajax-valid="model.checkName(value)" required/>
            <label class="control-label" ng-show="add.name.$dirty && add.name.$error.required">存储名称必填</label>
            <label class="control-label" ng-show="!add.name.$error.required && (!model.validName && model.nameFlag)">存储名称已存在</label>
            <label class="control-label" ng-if="!add.name.$error.required&&!model.nameFlag">请输入1-20位名称,包括数字、中英文、下划线、空格</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>型号</label>

        <div class="col-sm-8" data-ng-class="(add.storageModel.$invalid&&add.storageModel.$dirty) ? 'has-error' : ''">
            <input type="text" class="form-control" name="storageModel" data-ng-model="model.model.storageModel" maxlength="21" data-ajax-valid="model.checkModel(value)"required />
            <label class="control-label" ng-show="add.storageModel.$dirty && add.storageModel.$error.required">交换机型号必填</label>
            <label class="control-label" ng-if="!add.storageModel.$error.required&&!model.modelFlag">请输入1-20位型号,包括数字、中英文、下划线、空格</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>存储容量(G)</label>

        <div class="col-sm-8" data-ng-class="(add.storageValue.$invalid&&add.storageValue.$dirty) ? 'has-error' : ''">
            <input type="text" class="form-control" name="storageValue" data-ng-model="model.model.storageValue" maxlength="10"  data-ajax-valid="model.checkValue(value)"required />
            <label class="control-label" ng-show="add.storageValue.$dirty && add.storageValue.$error.required">存储容量必填</label>
            <label class="control-label" ng-if="!add.storageValue.$error.required&&!model.valueFlag">请输入1到999999999的整数</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label"><span class="color-require">*</span>数据传输率(kbps)</label>

        <div class="col-sm-8" data-ng-class="(add.dataRate.$invalid&&add.dataRate.$dirty) ? 'has-error' : ''">
            <input type="text" class="form-control" name="dataRate" data-ng-model="model.model.dataRate"  maxlength="10" data-ajax-valid="model.checkRate(value)"required />
            <label class="control-label" ng-show="add.dataRate.$dirty && add.dataRate.$error.required">数据传输率必填</label>
            <label class="control-label" ng-if=" !add.dataRate.$error.required&&!model.rateFlag">请输入1到999999999的整数</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label">高速缓存(MB)</label>
        <div class="col-sm-8" data-ng-class="(add.cache.$invalid&&add.cache.$dirty) ? 'has-error' : ''">
            <input type="text" class="form-control" name="cache" data-ng-model="model.model.cache" maxlength="10"  data-ng-pattern="/^([1-9]\d{0,8}|9)?$/"/>
            <label class="control-label" ng-if="add.cache.$dirty &&add.cache.$error.pattern">请输入1到999999999的整数</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label">RAID支持:</label>

        <div class="col-sm-8" >
            <label class="control-label small-size" style="font-size:12px;"><input name="trueOrFalse" type="radio" value="1"  ng-model="model.model.raidSupport"/>是 </label>
            <label class="control-label small-size"  style="font-size:12px;"><input name="trueOrFalse" type="radio" value="0" ng-model="model.model.raidSupport"/>否 </label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label">责任人</label>

        <div class="col-sm-8" data-ng-class="(add.checkresponPerson.$dirty&&add.checkresponPerson.$invalid?'show':'hide'&&model.model.responPerson.lenth>0) ? 'has-error' : ''">
            <input type="text" class="form-control"  name="checkresponPerson" data-ng-model="model.model.responPerson" data-ng-pattern="/^[\u4e00-\u9fa5a-zA-Z0-9_]{0,20}$/" />
            <label class="control-label" ng-if="add.checkresponPerson.$dirty&&add.checkresponPerson.$error.pattern?'show':'hide'&&model.model.responPerson.lenth>0
">请输入1-20位字符,支持数字、中英文、下划线
            </label>

        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label">联系电话</label>

        <div class="col-sm-8" data-ng-class="(add.responPersonMobile.$invalid&&add.responPersonMobile.$dirty) ? 'has-error' : ''">
            <input type="text" class="form-control" name="responPersonMobile" ng-model="model.model.responPersonMobile" ng-pattern="/^1\d{10}$|^(0\d{2,3}-?|\(0\d{2,3}\))?[1-9]\d{4,7}(-\d{1,8})?$/"/>
            <label class="control-label" ng-if="add.responPersonMobile.$dirty &&add.responPersonMobile.$error.pattern">请输入正确的联系电话</label>
        </div>
    </div>
    <div class="form-group has-feedback" >
        <label class="col-sm-3 control-label">描述</label>

        <div class="col-sm-8" >
            <textarea class="form-control ng-valid" maxlength="200" data-ng-model="model.model.memo" style="height:50px;"></textarea>
        </div>
    </div>
</form>
<div class="modal-footer">
    <button class="btn btn-primary btn-modal" ng-click="ok(model.model)" ng-disabled="add.$invalid||!model.stateFlag|| !model.validName" type = "button">确  定</button>
    <button class="btn btn-default btn-modal" ng-click="cancel()" style = "margin-left:15px;" type = "button">取  消</button>
</div>