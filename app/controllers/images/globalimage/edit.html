<form class="form-horizontal" name="edit" novalidate>



    <div class="form-group" ng-if="gloedit.item.isUse!='0'">
        <label class="col-sm-2 control-label">类型：</label>
        <span class="col-sm-2" style="padding-top: 7px;">{{gloedit.item.imageIspublic=='1'?'公共镜像':'市场镜像'}}</span>
    </div>

    <div class="form-group" ng-if="gloedit.item.isUse=='0'">
        <label class="col-sm-2 control-label"><span  class="color-require">*</span >类型：</label>

        <div class="col-sm-3">
            <eayun-select disabled="{{}}" class="form-control" ng-model="gloedit.item.imageIspublic"    placeholder="请选择类型"  data-ng-change="gloedit.dcSysChange(gloedit.item.sysType)" required>
                <eayun-option value="'1'" text="公共镜像" ></eayun-option>
                <eayun-option value="'3'" text="市场镜像" ></eayun-option>
            </eayun-select>
        </div>

    </div>



    <div class="form-group">
        <label class="col-sm-2 control-label"><span  class="color-require">*</span >镜像名称：</label>

        <div class="col-sm-8" data-ng-class="edit.name.$invalid  ? 'has-error' : ''">
            <input type="text" class="form-control" data-ng-model="gloedit.item.imageName"   placeholder="请输入镜像名称"  maxlength="100" name="name"  required/>
            <label class="control-label hide"
                   data-ng-class="edit.name.$dirty && edit.name.$error.required ? 'show' : 'hide'"
                   style="text-align: left;">请输入镜像名称，长度限定为100位</label>
        </div>
    </div>



    <div class="form-group" ng-if="gloedit.item.imageIspublic=='3'">
        <label class="col-sm-2 control-label"><span  class="color-require">*</span >提供商：</label>

        <div class="col-sm-3" data-ng-class="edit.provider.$invalid  ? 'has-error' : ''">
            <input type="text" class="form-control" data-ng-model="gloedit.item.provider" maxlength="100"  placeholder="请输入提供商名称"
                   name="provider"  required/>
            <label class="control-label hide"
                   data-ng-class="edit.provider.$dirty && edit.provider.$error.required ? 'show' : 'hide'"
                   style="text-align: left;">请输入提供商名称，长度限定为100位</label>
            <label class="control-label hide"
                   data-ng-class="!edit.provider.$dirty &&edit.provider.$invalid ? 'show' : 'hide'"
                   style="text-align: left;">请输入提供商名称，长度限定为100位</label>
            <label class="control-label" ng-show="edit.provider.$error.pattern">只能由数字、中英文、下划线、空格、和英文句号组成</label>
        </div>

        <label class="col-sm-2 control-label"><span  class="color-require">*</span >业务类别：</label>

        <div class="col-sm-3">
            <eayun-select class="form-control" ng-model="gloedit.item.professionType" placeholder="请选择业务类别"
                          required>
                <eayun-option value="os.nodeId" text="{{::os.nodeName}}" ng-repeat="os in gloedit.marketTypeList"></eayun-option>
            </eayun-select>
        </div>

    </div>



    <div class="form-group">
        <label class="col-sm-2 control-label"><span  class="color-require">*</span >系统类型：</label>

        <div class="col-sm-3">
            <eayun-select class="form-control" ng-model="gloedit.item.sysType"   placeholder="请选择系统类型"   data-ng-change="gloedit.dcSysChange(gloedit.item.sysType)" required>
                <eayun-option value="sys.nodeId" text="{{::sys.nodeName}}" ng-repeat="sys in gloedit.sysList"></eayun-option>
            </eayun-select>
        </div>
    </div>




    <div class="form-group">
        <label class="col-sm-2 control-label"><span  class="color-require">*</span >系统详情：</label>

        <div class="col-sm-8" data-ng-class="(edit.sysDetail.$invalid ) ? 'has-error' : ''">
            <input type="text" class="form-control" data-ng-model="gloedit.item.sysDetail" maxlength="100"  name="sysDetail"  placeholder="请输入系统详情"  required/>
            <label class="control-label hide"
                   data-ng-class="edit.sysDetail.$dirty && edit.sysDetail.$error.required ? 'show' : 'hide'"
                   style="text-align: left;">请输入系统详情，长度限定为100位</label>
            <label class="control-label hide"
                   data-ng-class="!edit.sysDetail.$dirty && edit.sysDetail.$invalid ? 'show' : 'hide'"
                   style="text-align: left;">请输入系统详情，长度限定为100位</label>
            <label class="control-label" ng-show="edit.sysDetail.$error.pattern">只能由数字、中英文、下划线、空格、和英文句号组成</label>
        </div>
    </div>


    <div class="form-group" ng-if="gloedit.item.imageIspublic=='3'">
        <label class="col-sm-2 control-label"><span  class="color-require">*</span >集成软件：</label>
        <div class="col-md-8">
            <textarea class="form-control" rows="3" name="integratedSoftware" placeholder="请输入镜像集成的软件" data-ng-model="gloedit.item.integratedSoftware" maxlength="500" required ></textarea>
        </div>
    </div>


    <div class="form-group">
        <label class="col-sm-2 control-label"><span  class="color-require">*</span >最小CPU：</label>
        <div class="col-md-3"
             data-ng-class="(edit.imCpu.$dirty && (edit.imCpu.$invalid||gloedit.minCpuError))||edit.imCpu.$error.pattern?'has-error' : ''">
            <div class="has-feedback">
                <input type="text" class="form-control"
                       data-ng-model="gloedit.item.minCpu" name="imCpu" placeholder="请输入最小CPU" required
                       data-ng-pattern='/^(1|\+?[1-9][0-9]*)$/' maxlength="2" data-ng-change="gloedit.checkCPU('min')">
                <span class="ey-suffix">核</span>
                <label class="control-label hide"
                       data-ng-class="edit.imCpu.$dirty && (edit.imCpu.$invalid || edit.imCpu.$error.required)||edit.imCpu.$error.pattern ? 'show' : 'hide'"
                       style="text-align: left;">请输入大于等于1的整数</label>
                <label class="control-label hide"
                       data-ng-class="edit.imCpu.$dirty && (!edit.imCpu.$invalid && gloedit.minCpuError) ? 'show' : 'hide'"
                       style="text-align: left;">必须小于最大CPU</label>
            </div>
        </div>


        <label class="col-sm-2 control-label"><span  class="color-require">*</span >最小内存：</label>
        <div class="col-md-3"
             data-ng-class="(edit.imRam.$dirty && (edit.imRam.$invalid||gloedit.minRamError)||edit.imRam.$error.pattern)?'has-error' : ''">
            <div class="has-feedback">
                <input type="text" class="form-control"
                       data-ng-model="gloedit.item.minRam" name="imRam" placeholder="请输入最小内存" required
                       data-ng-pattern='/^(1|\+?[1-9][0-9]*)$/' maxlength="3" data-ng-change="gloedit.checkRAM('min')">
                <span class="ey-suffix">GB</span>
                <label class="control-label hide"
                       data-ng-class="edit.imRam.$dirty && (edit.imRam.$invalid || edit.imRam.$error.required)||edit.imRam.$error.pattern? 'show' : 'hide'"
                       style="text-align: left;">请输入大于等于1的整数</label>
                <label class="control-label hide"
                       data-ng-class="edit.imRam.$dirty && (!edit.imRam.$invalid && gloedit.minRamError) ? 'show' : 'hide'"
                       style="text-align: left;">必须小于最大内存</label>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" ng-if="gloedit.item.imageIspublic=='1'"><span  class="color-require">*</span >最小硬盘：</label>
        <div class="col-md-3"
             data-ng-class="(edit.imDisk.$dirty && edit.imDisk.$invalid )||(gloedit.item.minDisk > gloedit.minDisk)||edit.imDisk.$error.pattern?'has-error' : ''" ng-if="gloedit.item.imageIspublic=='1'">
            <div class="has-feedback">
                <input type="text" class="form-control"
                       data-ng-model="gloedit.item.minDisk" name="imDisk" placeholder="请输入最小硬盘" required
                       data-ng-pattern='/^(1|\+?[1-9][0-9]*)$/'>
                <span class="ey-suffix">GB</span>
                <label class="control-label" style="text-align: left;"  ng-show="edit.imDisk.$dirty &&edit.imDisk.$error.required">请输入镜像最低磁盘要求，必须≥镜像大小</label>
                <label class="control-label" ng-show="(gloedit.item.minDisk>gloedit.minDisk)">请输入≤{{gloedit.minDisk}}的正整数</label>
                <label class="control-label" ng-show="edit.imDisk.$error.pattern">请输入≤{{gloedit.minDisk}}的正整数</label>
            </div>
        </div>


        <label class="col-sm-2 control-label" ng-if="gloedit.item.imageIspublic=='3'"><span  class="color-require">*</span >最小硬盘：</label>
        <div class="col-md-3"
             data-ng-class="(edit.imDisk.$dirty && edit.imDisk.$invalid||edit.imDisk.$error.pattern)?'has-error' : ''" ng-if="gloedit.item.imageIspublic=='3'">
            <div class="has-feedback">
                <input type="text" class="form-control" placeholder=""
                       data-ng-model="gloedit.item.minDisk" name="imDisk"  placeholder="请输入最小硬盘" required
                       data-ng-pattern='/^(1|\+?[1-9][0-9]*)$/'>
                <span class="ey-suffix">GB</span>
                <label class="control-label" style="text-align: left;" ng-show="edit.imDisk.$dirty &&edit.imDisk.$error.required">请输入镜像最低磁盘要求，必须≥镜像大小</label>
                <label class="control-label" style="text-align: left;" ng-show="edit.imDisk.$error.pattern">请输入镜像最低磁盘要求，必须≥镜像大小</label>
            </div>
        </div>


        <label class="col-sm-2 control-label" ng-if="gloedit.item.imageIspublic=='3'"><span  class="color-require">*</span >系统盘大小：</label>
        <div class="col-md-3"
             data-ng-class="(edit.sysdiskSize.$invalid ||(1*gloedit.item.sysdiskSize < 1*gloedit.item.minDisk)||(1*gloedit.item.sysdiskSize >2000))?'has-error' : ''"  ng-if="gloedit.item.imageIspublic=='3'">
            <div class="has-feedback">
                <input type="text" class="form-control"
                       data-ng-model="gloedit.item.sysdiskSize" name="sysdiskSize" placeholder="请输入系统盘大小" required
                       data-ng-pattern='/^(1|\+?[1-9][0-9]*)$/'>
                <span class="ey-suffix">GB</span>
                <label class="control-label" ng-show="!edit.sysdiskSize.$dirty &&edit.sysdiskSize.$invalid">请输入≥最小硬盘的整数</label>
                <label class="control-label" ng-show="edit.sysdiskSize.$dirty &&edit.sysdiskSize.$error.required">请输入≥最小硬盘的整数</label>
                <label class="control-label" ng-show="edit.sysdiskSize.$dirty && edit.sysdiskSize.$error.pattern">请输入≥最小硬盘的整数</label>
                <label class="control-label" ng-show="1*gloedit.item.sysdiskSize < 1*gloedit.item.minDisk">请输入≥最小硬盘的整数</label>
                <label class="control-label" ng-show="1*gloedit.item.sysdiskSize >2000">请输入≤2000的整数</label>
            </div>
        </div>

    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label">最大CPU：</label>
        <div class="col-md-3"
             data-ng-class="edit.maxCpuName.$dirty && (edit.maxCpuName.$invalid||gloedit.maxCpuError)?'has-error' : ''">
            <div class="has-feedback">
                <input type="text" class="form-control"
                       data-ng-model="gloedit.item.maxCpu" name="maxCpuName" data-ng-pattern='/^[1-9]\d{0,4}$/' maxlength="5" data-ng-change="gloedit.checkCPU('max')" placeholder="请输入最大CPU">
                <span class="ey-suffix">核</span>
                <label class="control-label" ng-show="edit.maxCpuName.$dirty && edit.maxCpuName.$invalid">请输入不超过5位的正整数</label>
                <label class="control-label hide"
                       data-ng-class="edit.maxCpuName.$dirty && (!edit.maxCpuName.$invalid && gloedit.maxCpuError) ? 'show' : 'hide'"
                       style="text-align: left;">必须大于最小CPU</label>
            </div>
        </div>

        <label class="col-sm-2 control-label">最大内存：</label>
        <div class="col-md-3"
             data-ng-class="edit.maxRamName.$dirty && (edit.maxRamName.$invalid||gloedit.maxRamError)?'has-error' : ''">
            <div class="has-feedback">
                <input type="text" class="form-control"
                       data-ng-model="gloedit.item.maxRam" name="maxRamName" data-ng-pattern='/^[1-9]\d{0,5}$/' maxlength="6" data-ng-change="gloedit.checkRAM('max')" placeholder="请输入最大内存">
                <span class="ey-suffix">GB</span>
                <label class="control-label" ng-show="edit.maxRamName.$dirty && edit.maxRamName.$invalid">请输入不超过6位的正整数</label>
                <label class="control-label hide"
                       data-ng-class="edit.maxRamName.$dirty && (!edit.maxRamName.$invalid && gloedit.maxRamError) ? 'show' : 'hide'"
                       style="text-align: left;">必须大于最小内存</label>
            </div>
        </div>
    </div>

    <div class="form-group" ng-if="gloedit.item.imageIspublic!='3'">
        <label class="col-sm-2 control-label">描述：</label>
        <div class="col-md-8">
            <textarea class="form-control" rows="3" name="desc" placeholder="请输入镜像描述" data-ng-model="gloedit.item.imageDescription" maxlength="200"></textarea>
        </div>
    </div>

    <div class="modal-footer" >
        <button type="button" class="btn btn-primary btn-modal" data-ng-click="commit()"  data-ng-disabled="!edit.$valid||gloedit.minCpuError||gloedit.maxCpuError||gloedit.minRamError||gloedit.maxRamError||(gloedit.item.imageIspublic=='3'&&((1*gloedit.item.sysdiskSize < 1*gloedit.item.minDisk)||(1*gloedit.item.sysdiskSize >2000)))||(gloedit.item.imageIspublic=='1'&&(gloedit.item.minDisk>gloedit.minDisk))">确  定</button>
        <button type="button" class="btn btn-default btn-modal" data-ng-click="cancel()">取  消</button>
    </div>
</form>