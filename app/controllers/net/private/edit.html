<form class="form-horizontal" name="editNet" novalidate>
    <div class="form-group">
        <label class="col-sm-3 control-label">所属数据中心：</label>

        <div class="col-sm-4">
            <label class="control-label">{{edit.net.dcName}}</label>
        </div>
        <!--<div class="col-sm-8">
            <eayun-select disabled="{{edit.net.netId}}" class="form-control" ng-model="edit.net.dcId"
                          ng-change="edit.dcChange()" placeholder="请选择数据中心" required>
                &lt;!&ndash;<eayun-option value="" text="请选择数据中心" selected></eayun-option>&ndash;&gt;
                <eayun-option value="dc.id" text="{{::dc.name}}" ng-repeat="dc in edit.dcList"></eayun-option>
            </eayun-select>
        </div>-->
    </div>
    <div class="form-group">
        <label class="col-sm-3 control-label">所属项目：</label>

        <div class="col-sm-4">
            <label class="control-label">{{edit.net.prjName}}</label>
        </div>
        <!--<div class="col-sm-8">
            <eayun-select disabled="{{edit.net.netId}}" class="form-control" ng-model="edit.net.prjId"
                          ng-change="edit.prjChange()" placeholder="请选择项目" required>
                &lt;!&ndash;<eayun-option value="null" text="请选择项目"></eayun-option>&ndash;&gt;
                <eayun-option value="prj.projectId" text="{{::prj.prjName}}"
                              ng-repeat="prj in edit.prjList"></eayun-option>
            </eayun-select>
        </div>-->
    </div>
    <div class="form-group">
        <label class="col-sm-3 control-label">网络名称：</label>

        <div class="col-sm-8"
             data-ng-class="(editNet.name.$dirty && editNet.name.$invalid) ? 'has-error' : ''">
            <input type="text" class="form-control" data-ng-model="edit.net.netName" name="name"
                   ajax-valid="edit.checkName(value)" placeholder="请输入名称" maxlength="20"
                   ng-pattern='/^[\u4e00-\u9fa5a-zA-Z0-9]([\u4e00-\u9fa5_a-zA-Z0-9\s]{0,18}[\u4e00-\u9fa5a-zA-Z0-9]){0,1}$/'
                   required/>
            <label class="control-label hide"
                   data-ng-class="editNet.name.$dirty && editNet.name.$error.required ? 'show' : 'hide'"
                   style="text-align: left;">网络名称不能为空</label>
            <label class="control-label hide"
                   data-ng-class="editNet.name.$dirty && editNet.name.$error.pattern ? 'show' : 'hide'"
                   style="text-align: left;">请输入1-20位字符,支持数字、中英文、下划线、空格</label>
            <label class="control-label hide"
                   data-ng-class="editNet.name.$dirty && editNet.name.$error.ajaxValid ? 'show' : 'hide'"
                   style="text-align: left;">名称已存在</label>
        </div>
    </div>
    <div class="form-group" ng-if="!edit.net.netId || edit.net.routeId">
        <label class="col-sm-3 control-label">路由带宽：</label>

        <!--<div class="col-sm-5"
             data-ng-class="(editNet.rate.$dirty && editNet.rate.$invalid)||((1.0*(edit.net.rate?edit.net.rate:0)+edit.quota.countBandUse > edit.quota.countBand)||(edit.quota.countBandUse>=edit.quota.countBand)) ? 'has-error' : ''">
            <input type="text" class="form-control" data-ng-model="edit.net.rate" name="rate" maxlength="9"
                   placeholder="请输入大于0的整数" ng-pattern="/^[1-9]\d*$/" required/>
            <label class="control-label hide"
                   data-ng-class="editNet.rate.$dirty && editNet.rate.$invalid &&edit.quota.countBandUse<edit.quota.countBand? 'show' : 'hide'"
                   style="text-align: left;">请输入大于0的整数</label>
            <label class="control-label" data-ng-if="(1.0*(edit.net.rate?edit.net.rate:0)+edit.quota.countBandUse > edit.quota.countBand)&&(edit.quota.countBandUse<edit.quota.countBand)">不能超过{{edit.quota.countBand-edit.quota.countBandUse}}Mbps</label>
            <label class="control-label" data-ng-if="(edit.quota.countBandUse>=edit.quota.countBand)">已无可用带宽,请申请配额</label>
        </div>-->
        <div class="col-sm-3">
            <label class="control-label text-left">{{edit.net.rate}}Mbps</label>
        </div>
    </div>
    <div class="form-group" ng-if="!(!edit.net.netId || edit.net.routeId)">
        <label class="col-sm-3 control-label">路由带宽：</label>

        <!--<div class="col-sm-5" data-ng-class="(1.0*(edit.net.rate?edit.net.rate:0)+edit.quota.countBandUse > edit.quota.countBand)||(edit.quota.countBandUse>=edit.quota.countBand)? 'has-error' : ''">
            <input type="number" class="form-control" data-ng-model="edit.net.rate" disabled/>
        </div>-->
        <div class="col-sm-3">
            <label class="control-label text-left">{{edit.net.rate}}Mbps</label>
        </div>
    </div>
    <!--<div class="form-group">
        <label class="col-sm-3 control-label"></label>
        <div class="col-sm-5" data-ng-class="(1.0*(edit.net.rate?edit.net.rate:0)+edit.quota.countBandUse > edit.quota.countBand)||(edit.quota.countBandUse>=edit.quota.countBand)? 'has-error' : ''" style="margin-top: -20px;">
            <label class="control-label" data-ng-if="(1.0*(edit.net.rate?edit.net.rate:0)+edit.quota.countBandUse > edit.quota.countBand)&&(edit.quota.countBandUse<edit.quota.countBand)">不能超过{{edit.quota.countBand-edit.quota.countBandUse}}Mbps</label>
            <label class="control-label" data-ng-if="(edit.quota.countBandUse>=edit.quota.countBand)">已无可用带宽,请申请配额</label>
        </div>

    </div>-->
    <div class="form-group">
        <label class="col-sm-3 control-label">带宽使用情况：</label>

        <div class="col-sm-5"
             data-ng-class="(1.0*(edit.net.rate?edit.net.rate:0)+edit.quota.countBandUse > edit.quota.countBand) ? 'has-error' : ''">
            <div class="progress" style="margin-top:12px;">
                <div class="progress-bar"
                     data-ng-class="((1.0*(edit.net.rate?edit.net.rate:0)+edit.quota.countBandUse)/edit.quota.countBand)>=0.8 ?'progress-bar-danger':'progress-bar-info'"
                     data-role="progressbar"
                     data-aria-valuemax="100"
                     data-ng-style="{'width':((1.0*(edit.net.rate?edit.net.rate:0)+edit.quota.countBandUse)/edit.quota.countBand)*100+'%'}"
                     data-placement="top">
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <label class="control-label">{{1.0*(edit.net.rate?edit.net.rate:0)+edit.quota.countBandUse}}/{{edit.quota.countBand}}已使用</label>
        </div>
    </div>
</form>

<div class="modal-footer">
    <button type="button" class="btn btn-primary btn-modal" data-ng-click="commit()"
            data-ng-disabled="!editNet.$valid">确 定
    </button>
    <button type="button" class="btn btn-default btn-modal" data-ng-click="cancel()">取 消</button>
</div>